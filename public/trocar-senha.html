<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Trocar Senha</title>
</head>
<body>

<h2>Trocar Senha</h2>
<input id="atual" type="password" placeholder="Senha atual">
<input id="nova" type="password" placeholder="Nova senha">
<button onclick="trocar()">Salvar</button>

<script>
const user = JSON.parse(localStorage.getItem("user"));

function trocar() {
  fetch("/api/trocar-senha",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({
      user_id: user.id,
      senha_atual: atual.value,
      nova_senha: nova.value
    })
  }).then(r=>r.json()).then(d=>{
    if(d.error) alert(d.error);
    else alert("Senha alterada");
  });
}
</script>

</body>
</html>
